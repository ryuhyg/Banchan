<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	<sql id="selectMember">
 		select mem_id, pw, mem_name, birth, tel, address_de, pw_answer, enable_no, address_no, pw_qna_no from ban_mem
 	</sql> 	
 	<select id="selectMember" resultType="memberVO">
 		select mem_id,pw from ban_mem
 	</select>
 	<select id="findMemberById" resultType="memberVO">
 	 <include refid="selectMember" />
 	 where mem_id=#{value} and enable_no=11
 	</select>
 	<!-- Spring Security에서 권한 체크를 위해 사용 -->
	<select id="selectAuthorityByMemId"  resultType="authority">
		SELECT bm.mem_id, bm.pw, bm.address_no, bm.address_de, bm.pw_QNA_NO, bm.mem_name, bm.pw_answer, a.auth_name, a.auth_no  
		FROM ban_mem bm, mem_auth ma, auth a
		WHERE ma.mem_id=bm.mem_id and a.auth_no=ma.auth_no and bm.mem_id=#{value}
	</select>
 	<select id="idcheck" resultType="int">
		select count(*) from  ban_mem where mem_id=#{value}
	</select>
</mapper>










